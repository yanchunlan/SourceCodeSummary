一.	内存分析命令
	USS: 物理内存		进程独占的内存
	PSS: 物理内存		PSS= USS+ 按比例包含共享库
	RSS: 物理内存		RSS= USS+ 包含共享库
	VSS: 虚拟内存		VSS= RSS+ 未分配实际物理内存

	dumpsys meminfo
		其中dumpsys源码位置在：/frameworks/native/cmds/dumpsys/dumpsys.cpp
		dumpsys传进来的参数通过函数，checkService来找到具体的service,并执行该service的dump方法
		dumpsys meminfo对应的服务是AMS,memBinder类的dump,
		是一系列数据的汇总，
	Debug.getMemoryInfo: 数据等效于/proc/$<pid>/smaps

二.	内存知识
	1.	内存管理框架
		1>	物理地址与虚拟地址
			虚拟地址与物理地址之间通过页表建立映射关系，CPU通过MMU访问页表查询虚拟地址对应的物理地址
			虚拟地址分为内核空间和用户空间，他们对应的虚拟地址分别为进城共享和进程隔离的
		2>	内核空间内存管理
			page作为内存管理基本单位，特性不同的page命名为zone，zone又根据node管理

			32位有：
				ZONE_DMA 		直接内存访问，无需映射
				ZONE_NORMAL 	一一对应映射页
				ZONE_HIGHMEM	动态映射页
			zone中的内存算法是buddy计算，高频使用Slab

			ION是内存管理器，用来支持不同内存分配机制，如物理连续内存(kmalloc)，虚拟地址连续但物理不连续内存(vmalloc)
		3>	用户空间内存管理
			分为2部分，native划分：
				Data 用于保存全局变量
				Bss 用于保存全局未初始化变量
				Code 程序代码段
				Stack 线程函数执行的内存
				Heap malloc分配管理的内存
			java划分：
				线程共享：java 堆，方法区
				线程私有：虚拟机栈，程序计数器，本地方法栈

	2.	linux内存分配与回收
		内存分配：
			alloc_page/alloc_pages调用开始，进行内存分配，首先进行快速内存分配，失败就使用慢速内存分配
			快速内存分配
			慢速内存分配
		内存回收：
			zone为单位进行回收，而系统判断是否回收zone是根据watermark判断
			
			high：zone空闲页数量高于这个值，不回收
			low：快速分配的默认阀值，zone的空闲页低于此值，执行回收
			min：快速分配失败后的慢速分配阀值，如果慢速分配使用它还是无法进行分配，则进行内存回收

			系统压力太大就会对zone进程内存回收，主要回收三样： slab、lru链表中的页、buffer_head

			lru链表中的页：主要有文件页、匿名页、shmem页
				文件页（file）：有文件背景页面，直接和硬盘对应的文件进行交换
				匿名页(anon)：无文件背景页面，进程堆、栈、数据段使用的页，无法磁盘交换，但可以跟swap区进行交换
				mmap页(shmem)：有文件属性，可以操作文件一样操作，但无文件背景，因此有匿名页属性，内核在内存不足时不能简单将page从page cache中丢弃，需要swap-out
			Lru链表回收算法：
				存在5个双向链表：LRU_INACTIVE_ANON，LRU_ACTIVE_ANON，LRU_INACTIVE_FILE，LRU_ACTIVE_FILE，LRU_UNEVICTABLE

				老化过程：新页放入lru链表 -> 活动lru链表的页移动到非活动lru链表 -> 非活动lru链表移动到非活动lru链表尾部 -> 回收页将页从lru链表中移除

				页回收方式：
					页回写：
						文件存储数据与磁盘数据不一致则为脏页，需将文件页写回到磁盘中对应数据所在位置，然后将此页作为空闲页边框释放到伙伴系统中
					页交换：
						不经常使用的匿名页，将他们写入swap分区中，然后作为空闲页框释放到伙伴系统中
					页丢弃：
						文件页保存内容与磁盘文件对应内容一致，说明文件页是一个干净的文件页，不需要回写，直接将此页作为空闲页框释放到伙伴系统中
				内存不足时，优先换无脏数据的page cache，直接丢弃，其次匿名页和脏数据文件页的回收，遵循url老化原则

				内存回收手段：
					根据回收目标区分有2种，zone/memcg，其中zone的内存回收方式主要是下面3种
					快速内存回收：

					直接内存回收：

					kswapd内存回收：

	3.	虚拟机内存分配与回收



	4.	内存回收主要手段

